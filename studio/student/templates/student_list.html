{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>👩‍🎓 Students</h2>
  <a href="{{ url_for('student_bp.student_form') }}" class="btn btn-primary mb-3">➕ Add Student</a>

  <form method="post" action="{{ url_for('student_bp.import_csv') }}" enctype="multipart/form-data" class="mb-3">
    <input type="file" name="file" accept=".csv" required>
    <button type="submit" class="btn btn-secondary">📤 Import CSV</button>
    <a href="{{ url_for('student_bp.export_csv') }}" class="btn btn-success">📥 Export CSV</a>
    <a href="{{ url_for('student_bp.export_json') }}" class="btn btn-info text-white">📥 Export JSON</a>
  </form>

  <table id="studentTable" class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th class="sortable">ID</th>
        <th class="sortable">First Name</th>
        <th class="sortable">Last Name</th>
        <th class="sortable">Phone</th>
        <th class="sortable">Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in students %}
      <tr>
        <td>{{ s.id }}</td>
        <td>{{ s.first_name }}</td>
        <td>{{ s.last_name }}</td>
        <td>{{ s.phone }}</td>
        <td>{{ s.email_id }}</td>
        <td>
          <a href="{{ url_for('student_bp.student_form', id=s.id) }}" class="btn btn-sm btn-warning">✏️ Edit</a>
          <a href="{{ url_for('student_bp.student_delete', id=s.id) }}" class="btn btn-sm btn-danger">🗑️ Delete</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {
  $('#studentTable').DataTable();
});
</script>
{% endblock %}
